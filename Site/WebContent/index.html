<!DOCTYPE html>
<html>
<head>
    <title>Hello WebSocket</title>
    <!--1 Libraries-->
    <script src="sockjs-0.3.4.js"></script>
    <script src="stomp.js"></script>
    <script src="jquery-2.1.1.min.js"></script>
    <!--2 Utilities-->
    <script type="text/javascript" src="stompService.js"></script>
    <!--3 Main Classes-->
    <script type="text/javascript" src="userProxy.js"></script>
</head>
<body>
<noscript><h2 style="color: #ff0000">Seems your browser doesn't support Javascript! Websocket relies on Javascript being enabled. Please enable
    Javascript and reload this page!</h2></noscript>
<div style="text-align:center">
    <div>
        <button id="connect" onclick="connect();">Connect</button>
        <button id="disconnect" disabled="disabled" onclick="disconnect();">Disconnect</button>
    </div>
    <div id="conversationDiv">
        <label>Send a hello message?</label><input type="text" id="name" />
        <button id="sendName">Send</button>
        <p id="response"></p>
    </div>
    <div style="border: 1px solid black;background-color:cornsilk;display:inline-block;">
        <form id="userForm" >
            <h2>Register User</h2>
            <label for="userEmail">Email</label>
            <input id="userEmail" name="email" type="text"   placeholder="email" />
            <label for="userPass">Password</label>
            <input id="userPass" name="password" type="text" placeholder="password" />
            <label for="userName">NickName</label>
            <input id="userName" name="name" type="text" placeholder="NickName" />
        </form>
        <button id="userFormSubmit">Add User</button>
    </div>

    <div style="border: 1px solid black;background-color:cornflowerblue;display:inline-block;">
        <form id="userFormLogin" >
            <h2>Login as User</h2>
            <label for="userEmailLogin">Email</label>
            <input id="userEmailLogin" name="email" type="text"   placeholder="email" />
            <label for="userPassLogin">Password</label>
            <input id="userPassLogin" name="password" type="text" placeholder="password" />

        </form>
        <button id="userFormLoginSubmit">Login</button>
        <div class="loginHide" style="display:none;"><span>&nbsp;</span></div>
    </div>

    <div id="startGamePanel" style="border: 1px solid black;display:none;background-color:indianred;display:inline-block;">
        <form>
           <label>Invitee Email<input id="emailToNotify" name="emailToNotify" type="text" /></label>
        </form>
        <button id="startGameBtn">Start Game With Player</button>
    </div>







</div>


<script>

    jQuery('#connect').click(function(){
        StompService.connect();
    });

    jQuery('#disconnect').click(function(){
        StompService.disconnect();
    });


    jQuery('#userFormSubmit').click(function(){
        var formString = jQuery('#userForm').serialize();
        UserProxy.registerUser(formString);
    });
    jQuery('#userFormLoginSubmit').click(function(){
        var formString = jQuery('#userFormLogin').serialize();
        UserProxy.login(formString);
    });

    jQuery('#startGameBtn').click(function(){
        var emailToNotify = jQuery('#emailToNotify').val();
        var user = UserProxy.user;
        StompService.sendMessage('startGame',{userEmail:user.email,userToken:user.token,emailToNotify:emailToNotify,gameType:'player',gameId:null});
    });










</script>
</body>
</html>